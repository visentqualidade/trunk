<?xml version = '1.0' encoding = 'UTF-8'?>
<TableView class="oracle.dbtools.crest.model.design.relational.TableView" directorySegmentName="seg_0" id="A2442F8F-E6DD-1FA8-2979-572105675A66" name="VIEW_SMP5_CN">
<createdBy>osx</createdBy>
<createdTime>2014-01-02 12:57:16 UTC</createdTime>
<generatorID>Gerado pelo usuário</generatorID>
<ownerDesignName>metricView</ownerDesignName>
<userDefined>true</userDefined>
<userDefinedSQL>WITH cns AS&lt;br/&gt;  (SELECT nome cn FROM cn&lt;br/&gt;  ),&lt;br/&gt;  dados_smp_cn AS&lt;br/&gt;  (SELECT Data,&lt;br/&gt;    Pmm,&lt;br/&gt;    CN,&lt;br/&gt;    CASE&lt;br/&gt;      WHEN SMP5_B = &apos;0&apos;&lt;br/&gt;      AND SMP5_A != &apos;-&apos;&lt;br/&gt;      THEN &apos;0,00&apos;&lt;br/&gt;      WHEN SMP5_B = &apos;-&apos;&lt;br/&gt;      AND SMP5_A  = &apos;-&apos;&lt;br/&gt;      THEN &apos;-&apos;&lt;br/&gt;      WHEN SMP5_B != &apos;-&apos;&lt;br/&gt;      AND SMP5_A   = &apos;-&apos;&lt;br/&gt;      THEN &apos;0,00&apos;&lt;br/&gt;      ELSE NVL(TO_CHAR(ROUND((SMP5_A * 100 / SMP5_B), 2), &apos;990D99&apos;), &apos;-&apos;)&lt;br/&gt;    END AS SMP5,&lt;br/&gt;    SMP5_A,&lt;br/&gt;    SMP5_B&lt;br/&gt;  FROM&lt;br/&gt;    (SELECT TRUNC(Tab.DATA)                  AS Data,&lt;br/&gt;      pmm.NOME                               AS Pmm,&lt;br/&gt;      Tab.CN                                 AS CN,&lt;br/&gt;      NVL(TO_CHAR(SUM(NVL(SMP5_A, 0))), &apos;-&apos;) AS SMP5_A,&lt;br/&gt;      NVL(TO_CHAR(SUM(NVL(SMP5_B, 0))), &apos;-&apos;) AS SMP5_B&lt;br/&gt;    FROM CDRVIEW_SMP5 Tab&lt;br/&gt;    GROUP BY TRUNC(Tab.DATA),&lt;br/&gt;      pmm.NOME,&lt;br/&gt;      Tab.CN&lt;br/&gt;    )&lt;br/&gt;  ),&lt;br/&gt;  agrupadores_smp_cn AS&lt;br/&gt;  (SELECT *&lt;br/&gt;  FROM&lt;br/&gt;    (SELECT DISTINCT dados_smp_cn.Data FROM dados_smp_cn&lt;br/&gt;    ) datas,&lt;br/&gt;    (SELECT DISTINCT dados_smp_cn.Pmm FROM dados_smp_cn&lt;br/&gt;    ) pmms,&lt;br/&gt;    (SELECT DISTINCT cns.cn FROM cns&lt;br/&gt;    ) cns&lt;br/&gt;  ),&lt;br/&gt;  agrupadores_por_dados AS&lt;br/&gt;  (SELECT agrupadores.Data,&lt;br/&gt;    agrupadores.cn,&lt;br/&gt;    agrupadores.Pmm,&lt;br/&gt;    DECODE(dados.SMP5, NULL, &apos;-&apos;, dados.SMP5) SMP5,&lt;br/&gt;    DECODE(dados.SMP5_A, NULL, &apos;-&apos;, dados.SMP5_A) SMP5_a,&lt;br/&gt;    DECODE(dados.SMP5_B, NULL, &apos;-&apos;, dados.SMP5_B) SMP5_b&lt;br/&gt;  FROM dados_smp_cn dados,&lt;br/&gt;    agrupadores_smp_cn agrupadores&lt;br/&gt;  WHERE agrupadores.Data = dados.Data(+)&lt;br/&gt;  AND agrupadores.Pmm    = dados.Pmm(+)&lt;br/&gt;  AND agrupadores.cn     = dados.CN(+)&lt;br/&gt;  )&lt;br/&gt;SELECT * FROM</userDefinedSQL>
<layoutSQL>&lt;?xml version = &apos;1.0&apos; encoding = &apos;UTF-8&apos;?&gt;&lt;br&gt;&lt;ActiveQueryBuilderLayout&gt;&lt;SQL&gt;With cns As (Select nome cn From cn), dados_smp_cn As (Select Data, Pmm, CN, Case When SMP5_B = &apos;0&apos; And SMP5_A != &apos;-&apos; Then &apos;0,00&apos; When SMP5_B = &apos;-&apos; And SMP5_A = &apos;-&apos; Then &apos;-&apos; When SMP5_B != &apos;-&apos; And SMP5_A = &apos;-&apos; Then &apos;0,00&apos; Else NVL(TO_CHAR(ROUND((SMP5_A * 100 / SMP5_B), 2), &apos;990D99&apos;), &apos;-&apos;) End As SMP5, SMP5_A, SMP5_B From (Select TRUNC(Tab.DATA) As Data, pmm.NOME As Pmm, Tab.CN As CN, NVL(TO_CHAR(Sum(NVL(SMP5_A, 0))), &apos;-&apos;) As SMP5_A, NVL(TO_CHAR(Sum(NVL(SMP5_B, 0))), &apos;-&apos;) As SMP5_B From CDRVIEW_SMP5 Tab Group By TRUNC(Tab.DATA), pmm.NOME, Tab.CN)), agrupadores_smp_cn As (Select * From (Select Distinct dados_smp_cn.Data From dados_smp_cn) datas, (Select Distinct dados_smp_cn.Pmm From dados_smp_cn) pmms, (Select Distinct cns.cn From cns) cns), agrupadores_por_dados As (Select agrupadores.Data, agrupadores.cn, agrupadores.Pmm, DECODE(dados.SMP5, Null, &apos;-&apos;, dados.SMP5) SMP5, DECODE(dados.SMP5_A, Null, &apos;-&apos;, dados.SMP5_A) SMP5_a, DECODE(dados.SMP5_B, Null, &apos;-&apos;, dados.SMP5_B) SMP5_b From dados_smp_cn dados, agrupadores_smp_cn agrupadores Where agrupadores.Data = dados.Data(+) And agrupadores.Pmm = dados.Pmm(+) And agrupadores.cn = dados.CN(+)) Select * From&lt;/SQL&gt;&lt;SubQueries&gt;&lt;SubQuery SQL=&quot;With cns As (Select nome cn From cn), dados_smp_cn As (Select Data, Pmm, CN, Case When SMP5_B = &apos;0&apos; And SMP5_A != &apos;-&apos; Then &apos;0,00&apos; When SMP5_B = &apos;-&apos; And SMP5_A = &apos;-&apos; Then &apos;-&apos; When SMP5_B != &apos;-&apos; And SMP5_A = &apos;-&apos; Then &apos;0,00&apos; Else NVL(TO_CHAR(ROUND((SMP5_A * 100 / SMP5_B), 2), &apos;990D99&apos;), &apos;-&apos;) End As SMP5, SMP5_A, SMP5_B From (Select TRUNC(Tab.DATA) As Data, pmm.NOME As Pmm, Tab.CN As CN, NVL(TO_CHAR(Sum(NVL(SMP5_A, 0))), &apos;-&apos;) As SMP5_A, NVL(TO_CHAR(Sum(NVL(SMP5_B, 0))), &apos;-&apos;) As SMP5_B From CDRVIEW_SMP5 Tab Group By TRUNC(Tab.DATA), pmm.NOME, Tab.CN)), agrupadores_smp_cn As (Select * From (Select Distinct dados_smp_cn.Data From dados_smp_cn) datas, (Select Distinct dados_smp_cn.Pmm From dados_smp_cn) pmms, (Select Distinct cns.cn From cns) cns), agrupadores_por_dados As (Select agrupadores.Data, agrupadores.cn, agrupadores.Pmm, DECODE(dados.SMP5, Null, &apos;-&apos;, dados.SMP5) SMP5, DECODE(dados.SMP5_A, Null, &apos;-&apos;, dados.SMP5_A) SMP5_a, DECODE(dados.SMP5_B, Null, &apos;-&apos;, dados.SMP5_B) SMP5_b From dados_smp_cn dados, agrupadores_smp_cn agrupadores Where agrupadores.Data = dados.Data(+) And agrupadores.Pmm = dados.Pmm(+) And agrupadores.cn = dados.CN(+)) Select * From&quot;&gt;&lt;UnionSubQuery/&gt;&lt;/SubQuery&gt;&lt;SubQuery SQL=&quot;Select nome cn From cn&quot;&gt;&lt;UnionSubQuery&gt;&lt;DataSource SQL=&quot;cn&quot; X=&quot;50&quot; Y=&quot;20&quot; Height=&quot;47&quot; Width=&quot;140&quot;/&gt;&lt;/UnionSubQuery&gt;&lt;/SubQuery&gt;&lt;SubQuery SQL=&quot;Select Data, Pmm, CN, Case When SMP5_B = &apos;0&apos; And SMP5_A != &apos;-&apos; Then &apos;0,00&apos; When SMP5_B = &apos;-&apos; And SMP5_A = &apos;-&apos; Then &apos;-&apos; When SMP5_B != &apos;-&apos; And SMP5_A = &apos;-&apos; Then &apos;0,00&apos; Else NVL(TO_CHAR(ROUND((SMP5_A * 100 / SMP5_B), 2), &apos;990D99&apos;), &apos;-&apos;) End As SMP5, SMP5_A, SMP5_B From (Select TRUNC(Tab.DATA) As Data, pmm.NOME As Pmm, Tab.CN As CN, NVL(TO_CHAR(Sum(NVL(SMP5_A, 0))), &apos;-&apos;) As SMP5_A, NVL(TO_CHAR(Sum(NVL(SMP5_B, 0))), &apos;-&apos;) As SMP5_B From CDRVIEW_SMP5 Tab Group By TRUNC(Tab.DATA), pmm.NOME, Tab.CN)&quot;&gt;&lt;UnionSubQuery&gt;&lt;DataSource SQL=&quot;(Select TRUNC(Tab.DATA) As Data, pmm.NOME As Pmm, Tab.CN As CN, NVL(TO_CHAR(Sum(NVL(SMP5_A, 0))), &apos;-&apos;) As SMP5_A, NVL(TO_CHAR(Sum(NVL(SMP5_B, 0))), &apos;-&apos;) As SMP5_B From CDRVIEW_SMP5 Tab Group By TRUNC(Tab.DATA), pmm.NOME, Tab.CN)&quot; X=&quot;50&quot; Y=&quot;20&quot; Height=&quot;137&quot; Width=&quot;140&quot;/&gt;&lt;/UnionSubQuery&gt;&lt;/SubQuery&gt;&lt;SubQuery SQL=&quot;Select TRUNC(Tab.DATA) As Data, pmm.NOME As Pmm, Tab.CN As CN, NVL(TO_CHAR(Sum(NVL(SMP5_A, 0))), &apos;-&apos;) As SMP5_A, NVL(TO_CHAR(Sum(NVL(SMP5_B, 0))), &apos;-&apos;) As SMP5_B From CDRVIEW_SMP5 Tab Group By TRUNC(Tab.DATA), pmm.NOME, Tab.CN&quot;&gt;&lt;UnionSubQuery&gt;&lt;DataSource SQL=&quot;CDRVIEW_SMP5 Tab&quot; X=&quot;50&quot; Y=&quot;20&quot; Height=&quot;47&quot; Width=&quot;140&quot;/&gt;&lt;/UnionSubQuery&gt;&lt;/SubQuery&gt;&lt;SubQuery SQL=&quot;Select * From (Select Distinct dados_smp_cn.Data From dados_smp_cn) datas, (Select Distinct dados_smp_cn.Pmm From dados_smp_cn) pmms, (Select Distinct cns.cn From cns) cns&quot;&gt;&lt;UnionSubQuery&gt;&lt;DataSource SQL=&quot;(Select Distinct dados_smp_cn.Data From dados_smp_cn) datas&quot; X=&quot;50&quot; Y=&quot;20&quot; Height=&quot;65&quot; Width=&quot;140&quot;/&gt;&lt;DataSource SQL=&quot;(Select Distinct dados_smp_cn.Pmm From dados_smp_cn) pmms&quot; X=&quot;240&quot; Y=&quot;20&quot; Height=&quot;65&quot; Width=&quot;140&quot;/&gt;&lt;DataSource SQL=&quot;(Select Distinct cns.cn From cns) cns&quot; X=&quot;50&quot; Y=&quot;87&quot; Height=&quot;65&quot; Width=&quot;140&quot;/&gt;&lt;/UnionSubQuery&gt;&lt;/SubQuery&gt;&lt;SubQuery SQL=&quot;Select Distinct dados_smp_cn.Data From dados_smp_cn&quot;&gt;&lt;UnionSubQuery&gt;&lt;DataSource SQL=&quot;dados_smp_cn&quot; X=&quot;50&quot; Y=&quot;20&quot; Height=&quot;155&quot; Width=&quot;140&quot;/&gt;&lt;/UnionSubQuery&gt;&lt;/SubQuery&gt;&lt;SubQuery SQL=&quot;Select Distinct dados_smp_cn.Pmm From dados_smp_cn&quot;&gt;&lt;UnionSubQuery&gt;&lt;DataSource SQL=&quot;dados_smp_cn&quot; X=&quot;50&quot; Y=&quot;20&quot; Height=&quot;155&quot; Width=&quot;140&quot;/&gt;&lt;/UnionSubQuery&gt;&lt;/SubQuery&gt;&lt;SubQuery SQL=&quot;Select Distinct cns.cn From cns&quot;&gt;&lt;UnionSubQuery&gt;&lt;DataSource SQL=&quot;cns&quot; X=&quot;50&quot; Y=&quot;20&quot; Height=&quot;65&quot; Width=&quot;140&quot;/&gt;&lt;/UnionSubQuery&gt;&lt;/SubQuery&gt;&lt;SubQuery SQL=&quot;Select agrupadores.Data, agrupadores.cn, agrupadores.Pmm, DECODE(dados.SMP5, Null, &apos;-&apos;, dados.SMP5) SMP5, DECODE(dados.SMP5_A, Null, &apos;-&apos;, dados.SMP5_A) SMP5_a, DECODE(dados.SMP5_B, Null, &apos;-&apos;, dados.SMP5_B) SMP5_b From dados_smp_cn dados, agrupadores_smp_cn agrupadores Where agrupadores.Data = dados.Data(+) And agrupadores.Pmm = dados.Pmm(+) And agrupadores.cn = dados.CN(+)&quot;&gt;&lt;UnionSubQuery&gt;&lt;DataSource SQL=&quot;dados_smp_cn dados&quot; X=&quot;50&quot; Y=&quot;20&quot; Height=&quot;155&quot; Width=&quot;140&quot;/&gt;&lt;DataSource SQL=&quot;agrupadores_smp_cn agrupadores&quot; X=&quot;240&quot; Y=&quot;20&quot; Height=&quot;101&quot; Width=&quot;140&quot;/&gt;&lt;/UnionSubQuery&gt;&lt;/SubQuery&gt;&lt;/SubQueries&gt;&lt;/ActiveQueryBuilderLayout&gt;</layoutSQL>
<parsed>true</parsed>
<schemaObject>4557F491-498C-47A4-4FCC-3C34A06925BD</schemaObject>
<usedContainers>
<container alias=")" containerID="0FB347BF-12B3-C1DC-C2EF-89EEA3938F08"/>
<container alias="Pmm" containerID="FE2490EA-1621-FD48-AE63-2FCE99EFB830"/>
</usedContainers>
<viewElements>
<viewElement class="oracle.dbtools.crest.model.design.relational.ColumnView" name="COL_826" id="E72DC756-72FB-A6E5-2335-6A573F6130A6">
<createdBy>bruno</createdBy>
<createdTime>2015-02-19 13:04:34 UTC</createdTime>
<generatorID>Gerado pelo usuário</generatorID>
<ownerDesignName>metricView</ownerDesignName>
<nullsAllowed>true</nullsAllowed>
<alias>cn</alias>
<dataType>NUMBER</dataType>
<headerAlias>cn</headerAlias>
<expression>nome</expression>
<reference>false</reference>
<referencedColumn>CC0EB792-2DFD-CF4A-E8E6-7A681A7E7D2E</referencedColumn>
<table>0FB347BF-12B3-C1DC-C2EF-89EEA3938F08</table>
</viewElement>
</viewElements>
</TableView>